{"version":3,"sources":["webpack:///./src/app/features/my-account/my-account.module.ts","webpack:///./src/app/features/my-account/my-account/my-account.component.html","webpack:///./src/app/features/my-account/my-account/my-account.component.scss","webpack:///./src/app/features/my-account/my-account/my-account.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAyC;AACM;AACwB;AAChB;AACF;AACO;AAE5D,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,mFAAkB;KAC9B;CACF,CAAC;AAWF;IAAA;IAA8B,CAAC;IAAlB,eAAe;QAT3B,8DAAQ,CAAC;YACR,YAAY,EAAE,CAAC,mFAAkB,CAAC;YAClC,OAAO,EAAE;gBACP,4DAAY;gBACZ,kEAAmB;gBACnB,yEAAY;gBACZ,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;aAC9B;SACF,CAAC;OACW,eAAe,CAAG;IAAD,sBAAC;CAAA;AAAH;;;;;;;;;;;;ACvB5B,s6C;;;;;;;;;;;ACAA,4BAA4B,kBAAkB,2BAA2B,wBAAwB,eAAe,EAAE,mBAAmB,kBAAkB,2BAA2B,wBAAwB,EAAE,2BAA2B,kBAAkB,mBAAmB,oBAAoB,4BAA4B,EAAE,+CAA+C,+/B;;;;;;;;;;;;;;;;;;;;;;;;ACA3T;AACO;AAChB;AACwB;AACE;AACA;AACI;AACmB;AAO1F;IAME,4BACU,EAAe,EACf,MAAc,EACd,WAAwB,EACxB,YAA0B,EAC1B,YAA0B,EAC3B,cAA8B,EAC9B,uBAAgD;QAN/C,OAAE,GAAF,EAAE,CAAa;QACf,WAAM,GAAN,MAAM,CAAQ;QACd,gBAAW,GAAX,WAAW,CAAa;QACxB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,iBAAY,GAAZ,YAAY,CAAc;QAC3B,mBAAc,GAAd,cAAc,CAAgB;QAC9B,4BAAuB,GAAvB,uBAAuB,CAAyB;QAZzD,sBAAiB,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YAChC,QAAQ,EAAE,CAAC,EAAE,EAAE,CAAC,yDAAU,CAAC,QAAQ,CAAC,CAAC;YACrC,KAAK,EAAE,CAAC,EAAE,CAAC;SACZ,CAAC,CAAC;IAUA,CAAC;IAEJ,qCAAQ,GAAR;QACE,IAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC;YAC9B,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,QAAQ;YAC/C,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,KAAK;SAC1C,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACH,0CAAa,GAAb;QAAA,iBAWC;QAVC,IAAI,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE;YAChC,IAAI,CAAC,WAAW;iBACb,aAAa,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;iBAClE,SAAS,CAAC;gBACT,KAAI,CAAC,YAAY,CAAC,QAAQ,CACxB,mBAAmB,EACnB,0CAA0C,CAC3C,CAAC;YACJ,CAAC,CAAC,CAAC;SACN;IACH,CAAC;IAED;;OAEG;IACH,0CAAa,GAAb;QAAA,iBAUC;QATC,IAAI,CAAC,WAAW;aACb,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC;aAC3C,SAAS,CAAC;YACT,KAAI,CAAC,YAAY,CAAC,IAAI,CACpB,kBAAkB,EAClB,2EAA2E,CAC5E,CAAC;YACF,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;IACP,CAAC;IApDU,kBAAkB;QAL9B,+DAAS,CAAC;YACT,QAAQ,EAAE,eAAe;YACzB,sIAA0C;;SAE3C,CAAC;+EAQc,0DAAW;YACP,sDAAM;YACD,8EAAW;YACV,gFAAY;YACZ,gFAAY;YACX,oFAAc;YACL,uGAAuB;OAb9C,kBAAkB,CAqD9B;IAAD,yBAAC;CAAA;AArD8B","file":"features-my-account-my-account-module.js","sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { MyAccountComponent } from \"./my-account/my-account.component\";\nimport { Routes, RouterModule } from \"@angular/router\";\nimport { ReactiveFormsModule } from \"@angular/forms\";\nimport { SharedModule } from \"src/app/shared/shared.module\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: MyAccountComponent\n  }\n];\n\n@NgModule({\n  declarations: [MyAccountComponent],\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    SharedModule,\n    RouterModule.forChild(routes)\n  ]\n})\nexport class MyAccountModule {}\n","module.exports = \"<div class=\\\"content animated fadeIn\\\">\\n    <h2 class=\\\"text-center mt-5\\\">BIENVENIDO A TU PERFIL</h2>\\n    <div class=\\\"w-75 form_data align-content-center\\\">\\n        <form class=\\\"p-3\\\" [formGroup]=\\\"updateProfileForm\\\" [snMarkAsTouched]=\\\"updateProfileForm\\\">\\n            <div class=\\\"form-group\\\">\\n                <label>Nombre</label>\\n                <input class=\\\"form-control\\\" type=\\\"text\\\" formControlName=\\\"fullName\\\" placeholder=\\\"Tu nombre...\\\" />\\n                <sn-validation-messages [control]=\\\"updateProfileForm.get('fullName')\\\"></sn-validation-messages>\\n            </div>\\n\\n            <div class=\\\"form-group mt-5\\\">\\n                <label>Email</label>\\n                <input class=\\\"email-not-modif form-control\\\" type=\\\"text\\\" formControlName=\\\"email\\\" readonly />\\n            </div>\\n        </form>\\n    </div>\\n    <div class=\\\"pt-2 form_butt\\\">\\n        <div>\\n            <button (click)=\\\"updateProfile()\\\" class=\\\"m-2\\\" type=\\\"submit\\\"><i class=\\\"far fa-save\\\"></i> Actualizar</button>\\n        </div>\\n        <!-- Se permite borrar al usuario si no tiene reservas pendientes ni reservas procesadas -->\\n        <div *ngIf=\\\"bookingService.bookings.length == 0 && bookingConfirmedService.bookings.length == 0\\\">\\n            <button (click)=\\\"deleteProfile()\\\" class=\\\"m-2\\\" type=\\\"submit\\\"><i class=\\\"far fa-trash-alt\\\"></i> Borrar user</button>\\n        </div>\\n    </div>\\n</div>\"","module.exports = \".content {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  width: 90%; }\\n\\ndiv.form_butt {\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center; }\\n\\ninput.email-not-modif {\\n  border-top: 0;\\n  border-left: 0;\\n  border-right: 0;\\n  background: transparent; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2JvczM5L0RvY3VtZW50cy9IYWNrQUJvcy9Qcm95ZWN0byBGaW5hbC9jb3JhbC1ob3RlbC1GUk9OVC9zcmMvYXBwL2ZlYXR1cmVzL215LWFjY291bnQvbXktYWNjb3VudC9teS1hY2NvdW50LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixtQkFBbUI7RUFDbkIsVUFBVSxFQUFBOztBQUdkO0VBQ0ksYUFBYTtFQUNiLHNCQUFzQjtFQUN0QixtQkFBbUIsRUFBQTs7QUFHdkI7RUFDSSxhQUFhO0VBQ2IsY0FBYztFQUNkLGVBQWU7RUFDZix1QkFBdUIsRUFBQSIsImZpbGUiOiJzcmMvYXBwL2ZlYXR1cmVzL215LWFjY291bnQvbXktYWNjb3VudC9teS1hY2NvdW50LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmNvbnRlbnQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHdpZHRoOiA5MCU7XG59XG5cbmRpdi5mb3JtX2J1dHQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG5pbnB1dC5lbWFpbC1ub3QtbW9kaWYge1xuICAgIGJvcmRlci10b3A6IDA7XG4gICAgYm9yZGVyLWxlZnQ6IDA7XG4gICAgYm9yZGVyLXJpZ2h0OiAwO1xuICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xufSJdfQ== */\"","import { Component, OnInit } from \"@angular/core\";\nimport { FormBuilder, Validators } from \"@angular/forms\";\nimport { Router } from \"@angular/router\";\nimport { UserService } from \"src/app/core/services/user.service\";\nimport { ToastService } from \"src/app/core/services/toast.service\";\nimport { ModalService } from \"src/app/core/services/modal.service\";\nimport { BookingService } from \"src/app/core/services/booking.service\";\nimport { BookingConfirmedService } from \"src/app/core/services/booking-confirmed.service\";\n\n@Component({\n  selector: \"sn-my-account\",\n  templateUrl: \"./my-account.component.html\",\n  styleUrls: [\"./my-account.component.scss\"]\n})\nexport class MyAccountComponent implements OnInit {\n  updateProfileForm = this.fb.group({\n    fullName: [\"\", [Validators.required]],\n    email: [\"\"]\n  });\n\n  constructor(\n    private fb: FormBuilder,\n    private router: Router,\n    private userService: UserService,\n    private toastService: ToastService,\n    private modalService: ModalService,\n    public bookingService: BookingService,\n    public bookingConfirmedService: BookingConfirmedService\n  ) {}\n\n  ngOnInit() {\n    this.updateProfileForm.setValue({\n      fullName: this.userService.currentUser.fullName,\n      email: this.userService.currentUser.email\n    });\n  }\n\n  /**\n   * Actualiza el perfil del usuario. El único campo permitido para cambiar es fullName\n   */\n  updateProfile() {\n    if (this.updateProfileForm.valid) {\n      this.userService\n        .updateProfile({ fullName: this.updateProfileForm.value.fullName })\n        .subscribe(() => {\n          this.toastService.addToast(\n            \"Perfil modificado\",\n            \"Sus datos ha sido modificados con éxito.\"\n          );\n        });\n    }\n  }\n\n  /**\n   * Borra el perfil de usuario\n   */\n  deleteProfile() {\n    this.userService\n      .deleteProfile(this.userService.currentUser)\n      .subscribe(() => {\n        this.modalService.open(\n          \"Perfil borrado!!\",\n          \"El perfil se ha borrado con éxito. Si lo desea puede volver a registrarse\"\n        );\n        this.router.navigate([\"/welcome\"]);\n      });\n  }\n}\n"],"sourceRoot":""}